<!DOCTYPE html>
<meta charset="utf-8">
<title>Education Spending in US States</title>
<script src="http://d3js.org/d3.v3.min.js"></script>
<style>

#myTable {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#myTable td, #myTable th {
  border: 1px solid #ddd;
  padding: 8px;
}

#myTable tr:nth-child(even){background-color: #f2f2f2;}

#myTable tr:hover {background-color: #ddd;}

#myTable th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #04AA6D;
  color: white;
}
	
/*w3Schools tutorial was followed for creation of the table. Creation of the map was guided by, geojson data was also pulled from here: https://gist.github.com/michellechandra/0b2ce4923dc9b5809922#file-us-states-json  */




/* On mouse hover, lighten state color */
path:hover {
	fill-opacity: .3;
}

/* Style for Custom Tooltip */
div.tooltip {   
 	position: absolute;           
	text-align: center;           
	width: 60px;                  
	height: 80px;                 
	padding: 2px;             
	font: 12px sans-serif;        
	background: #72bcd4;   
	border: 0px;      
	border-radius: 8px;           
	pointer-events: none;         
}
        
/* Legend Font Style */
body {
    padding: 40px;       
	font: 11px sans-serif;
}
        

</style>
<body>
	<div class="topnav">
		 <a href="index.html">Home</a>
		 <a href="frank.html">Frank (TODO)</a>
		 <a href="shelby.html">Shelby (TODO)</a>
		 <a href="ayo.html"> Ayo(TODO)</a>
		 <a href="ayo2.html"> Ayo2(TODO)</a>
		<a href="sid.html"> Sid(TODO)</a>
		 <a href="about.asp">About</a>
	</div>
    <h1>
		Education Insights Table
    </h1>
    
    <table id="myTable">
        <thead><tr><th onclick="sortTable(0)" title="Field #1">State</th>
        <th onclick="sortTable(1)" title="Field #2">High School Graduation Rate [sortBy ^] </th>
        <th onclick="sortTable(2)" title="Field #3">Percent Completing College [sortBy ^]</th>
        <th onclick="sortTable(3)" title="Field #4">Education SpendingPerPupil [sortBy ^] </th>
        </tr></thead>
        <tbody><tr>
        <td>Alabama</td>
        <td >92</td>
        <td >25.5</td>
        <td>10116.28614</td>
        </tr>
        <tr>
        <td>Alaska</td>
        <td >80</td>
        <td >29.6</td>
        <td>18313.42176</td>
        </tr>
        <tr>
        <td>Arizona</td>
        <td >78</td>
        <td >29.5</td>
        <td>8766.402019</td>
        </tr>
        <tr>
        <td>Arkansas</td>
        <td >88</td>
        <td >23</td>
        <td>10344.90046</td>
        </tr>
        <tr>
        <td>California</td>
        <td >85</td>
        <td >33.9</td>
        <td>14053.17631</td>
        </tr>
        <tr>
        <td>Colorado</td>
        <td >81</td>
        <td >40.9</td>
        <td>11539.5305</td>
        </tr>
        <tr>
        <td>Connecticut</td>
        <td >89</td>
        <td >39.3</td>
        <td>21345.6021</td>
        </tr>
        <tr>
        <td>Delaware</td>
        <td >89</td>
        <td >32</td>
        <td>14756.56734</td>
        </tr>
        <tr>
        <td>Florida</td>
        <td >87</td>
        <td >29.9</td>
        <td>9936.722694</td>
        </tr>
        <tr>
        <td>Georgia</td>
        <td >82</td>
        <td >31.3</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Hawaii</td>
        <td >85</td>
        <td >33</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Idaho</td>
        <td >81</td>
        <td >27.6</td>
        <td>8271.566953</td>
        </tr>
        <tr>
        <td>Illinois</td>
        <td >86</td>
        <td >34.7</td>
        <td>17340.02105</td>
        </tr>
        <tr>
        <td>Indiana</td>
        <td >87</td>
        <td >26.5</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Iowa</td>
        <td >92</td>
        <td >28.6</td>
        <td>11958.12875</td>
        </tr>
        <tr>
        <td>Kansas</td>
        <td >87</td>
        <td >33.4</td>
        <td>12696.75921</td>
        </tr>
        <tr>
        <td>Kentucky</td>
        <td >91</td>
        <td >24.2</td>
        <td>11396.83529</td>
        </tr>
        <tr>
        <td>Louisiana</td>
        <td >80</td>
        <td >24.1</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Maine</td>
        <td >87</td>
        <td >31.8</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Maryland</td>
        <td >87</td>
        <td >40.2</td>
        <td>14643.81636</td>
        </tr>
        <tr>
        <td>Massachusetts</td>
        <td >88</td>
        <td >43.7</td>
        <td>18268.60485</td>
        </tr>
        <tr>
        <td>Michigan</td>
        <td >81</td>
        <td >29.1</td>
        <td>13071.80858</td>
        </tr>
        <tr>
        <td>Minnesota</td>
        <td >84</td>
        <td >36.1</td>
        <td>13603.18324</td>
        </tr>
        <tr>
        <td>Mississippi</td>
        <td >85</td>
        <td >22</td>
        <td>9653.974656</td>
        </tr>
        <tr>
        <td>Missouri</td>
        <td >90</td>
        <td >29.2</td>
        <td>11249.37626</td>
        </tr>
        <tr>
        <td>Montana</td>
        <td >87</td>
        <td >32</td>
        <td>12105.35386</td>
        </tr>
        <tr>
        <td>Nebraska</td>
        <td >88</td>
        <td >31.9</td>
        <td>13004.147</td>
        </tr>
        <tr>
        <td>Nevada</td>
        <td >84</td>
        <td >24.7</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>New Hampshire</td>
        <td >88</td>
        <td >37</td>
        <td>18952.14615</td>
        </tr>
        <tr>
        <td>New Jersey</td>
        <td >91</td>
        <td >39.7</td>
        <td>20629.6443</td>
        </tr>
        <tr>
        <td>New Mexico</td>
        <td >75</td>
        <td >27.3</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>New York</td>
        <td >83</td>
        <td >36.6</td>
        <td>25520.36024</td>
        </tr>
        <tr>
        <td>North Carolina</td>
        <td >87</td>
        <td >31.3</td>
        <td>9957.985473</td>
        </tr>
        <tr>
        <td>North Dakota</td>
        <td >88</td>
        <td >30</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Ohio</td>
        <td >82</td>
        <td >28.3</td>
        <td>13804.54123</td>
        </tr>
        <tr>
        <td>Oklahoma</td>
        <td >85</td>
        <td >25.5</td>
        <td>9512.041651</td>
        </tr>
        <tr>
        <td>Oregon</td>
        <td >80</td>
        <td >33.7</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Pennsylvania</td>
        <td >87</td>
        <td >31.4</td>
        <td>17141.64616</td>
        </tr>
        <tr>
        <td>Rhode Island</td>
        <td >84</td>
        <td >34.2</td>
        <td>17024.14253</td>
        </tr>
        <tr>
        <td>South Carolina</td>
        <td >81</td>
        <td >28.1</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>South Dakota</td>
        <td >84</td>
        <td >28.8</td>
        <td>10233.78315</td>
        </tr>
        <tr>
        <td>Tennessee</td>
        <td >91</td>
        <td >27.3</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Texas</td>
        <td >90</td>
        <td >29.9</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Utah</td>
        <td >87</td>
        <td >34</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Vermont</td>
        <td >85</td>
        <td >38</td>
        <td>21313.99081</td>
        </tr>
        <tr>
        <td>Virginia</td>
        <td >88</td>
        <td >38.8</td>
        <td>12904.51852</td>
        </tr>
        <tr>
        <td>Washington</td>
        <td >81</td>
        <td >36</td>
        <td>14555.71182</td>
        </tr>
        <tr>
        <td>West Virginia</td>
        <td >91</td>
        <td >20.6</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Wisconsin</td>
        <td >90</td>
        <td >30.1</td>
        <td>&#39;NULL&#39;</td>
        </tr>
        <tr>
        <td>Wyoming</td>
        <td >82</td>
        <td >27.4</td>
        <td>16698.20871</td>
        </tr>
        </tbody></table>

        <h1>
            Education Spending by State Map
        </h1>

    
    <script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="//d3js.org/topojson.v1.min.js"></script>
	<script>


function sortTable(n) {
  var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
  table = document.getElementById("myTable");
  switching = true;
  //Set the sorting direction to ascending:
  dir = "asc"; 
  /*Make a loop that will continue until
  no switching has been done:*/
  while (switching) {
    //start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /*Loop through all table rows (except the
    first, which contains table headers):*/
    for (i = 1; i < (rows.length - 1); i++) {
      //start by saying there should be no switching:
      shouldSwitch = false;
      /*Get the two elements you want to compare,
      one from current row and one from the next:*/
      x = rows[i].getElementsByTagName("TD")[n];
      y = rows[i + 1].getElementsByTagName("TD")[n];
      /*check if the two rows should switch place,
      based on the direction, asc or desc:*/
      if (dir == "asc") {
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          //if so, mark as a switch and break the loop:
          shouldSwitch= true;
          break;
        }
      } else if (dir == "desc") {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          //if so, mark as a switch and break the loop:
          shouldSwitch = true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      /*If a switch has been marked, make the switch
      and mark that a switch has been done:*/
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
      //Each time a switch is done, increase this count by 1:
      switchcount ++;      
    } else {
      /*If no switching has been done AND the direction is "asc",
      set the direction to "desc" and run the while loop again.*/
      if (switchcount == 0 && dir == "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }
}

/*  This visualization was made possible by modifying code provided by:
Scott Murray, Choropleth example from "Interactive Data Visualization for the Web" 
https://github.com/alignedleft/d3-book/blob/master/chapter_12/05_choropleth.html   
		
Malcolm Maclean, tooltips example tutorial
http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html
Mike Bostock, Pie Chart Legend
http://bl.ocks.org/mbostock/3888852  */

		
//Width and height of map
var width = 1300;
var height = 800;

// D3 Projection
var projection = d3.geo.albersUsa()
				   .translate([width/2, height/2])    // translate to center of screen
				   .scale([1600]);          // scale things down so see entire US
        
// Define path generator
var path = d3.geo.path()               // path generator that will convert GeoJSON to SVG paths
		  	 .projection(projection);  // tell path generator to use albersUsa projection

		
// Define linear scale for output
var color = d3.scale.linear()
			  .range(["rgb(213,222,217)","rgb(69,173,168)","rgb(84,36,55)","rgb(217,91,67)"]);

//Create SVG element and append map to the SVG
var svg = d3.select("body")
			.append("svg")
			.attr("width", width)
			.attr("height", height);
        
// Append Div for tooltip to SVG
var div = d3.select("body")
		    .append("div")   
    		.attr("class", "tooltip")               
    		.style("opacity", 0);

// Load in my states data!
d3.csv("educationV.csv", function(data) {
color.domain([0,1,2,3]); // setting the range of the input data

// Load GeoJSON data and merge with states data
d3.json("us-states.json", function(json) {

// Loop through each state data value in the .csv file
for (var i = 0; i < data.length; i++) {

	// Grab State Name
	var dataState = data[i].state;

	// Grab data value 
	var dataValue = data[i].eduSpendingPerPupil;

	// Find the corresponding state inside the GeoJSON
	for (var j = 0; j < json.features.length; j++)  {
		var jsonState = json.features[j].properties.name;

		if (dataState == jsonState) {
            console.log("dataState", dataState)
            console.log("jsonState", jsonState)

		// Copy the data value into the JSON
		json.features[j].properties.eduSpendingPerPupil = dataValue; 

		// Stop looking through the JSON
		break;
		}
	}
}


		
// Bind the data to the SVG and create one path per GeoJSON feature
svg.selectAll("path")
	.data(json.features)
	.enter()
	.append("path")
	.attr("d", path)
	.style("stroke", "#fff")
    .style("stroke-width", "1")
    .on("mouseover", function(d) {      
    	div.transition()        
      	   .duration(200)      
		   .style("opacity", .9);      
           div.html(
              "State: " + d.properties.name + "<br/>" +
              "Spending: " + "$" + d.properties.eduSpendingPerPupil
			   )
           .style("left", (d3.event.pageX) + "px")     
           .style("top", (d3.event.pageY - 28) + "px");    
    }) 
	.style("fill", function(d) {

	// Get data value
	var value = d.properties.visited;

	if (value) {
	//If value exists…
	return color(value);
	} else {
	//If value is undefined…
	return "rgb(213,222,217)";
	}
});


svg.selectAll("text")
    .data(json.features)
    .enter()
    .append("text")
    .attr("fill", "black")
    .attr("transform", function(d) { 
        var centroid = path.centroid(d);
        return "translate(" + centroid[0] + "," + centroid[1] + ")"
    })
    .attr("text-anchor", "middle")
    .attr("dy", ".35em")
    .text(function(d) {
          return "$" + d.properties.eduSpendingPerPupil
    });

	});

});

</script>
	<br>
	<h3> <b> Implication </b></h3>
	<h5> The education insights table allows one to understand education disparities in America better. By sorting the High School Graduation Rate column, we see that Iowa and Alabama both have the highest high school graduation rate but the percentage of students completing college is on the lower side, 28.6% and 25.5% respectively. There could be a plethora of reasons why this is the case. Factors such as money could explain why students ultimately discontinue their education after high school. <br>
          In addition, According to <a href="https://educationdata.org/public-education-spending-statistics/">educationdata.org</a>, “schools in the United States spend an average of $16,993 per pupil”. As seen in the table and the map above, Alabama has the lowest education spending per pupil. In fact, the amount spent on a student in Alabama is $10,116, lower than the average cost. Massachusetts has a spending rate of $18268, and a higher rate of students completing college, 43,7%.It is possible that due to the fact that students have limited funding for school resources, they might miss the opportunity to discover passions and academic interests that other students might develop. As a result, students fail to see the point of pursuing higher education.
	</h5>

</body>
</html>
